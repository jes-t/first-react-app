(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),u=n(21),c=n(44),i=function(e){return{isAuth:e.auth.isAuth}},o=function(e){return Object(c.b)(i)((function(t){return t.isAuth?r.a.createElement(e,t):r.a.createElement(u.a,{to:"/login"})}))}},134:function(e,t,n){e.exports=n.p+"static/media/userLogo.08e6ccaf.png"},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var a=n(62),r=n(12),u={dialogs:[{id:0,firstName:"Jems",lastName:"Band",messages:[{data:"26.09.2020",time:"21:00",userId:0,message:"gfhdhhd!"},{data:"26.09.2020",time:"21:02",userId:1,message:"gfhdhjd! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:0,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 yefdmkfbs?"}],avatarUrl:"https://sun9-8.userapi.com/o4uD1PeHB2-m8Db3_tPtHnc4MjmDO4Tv4YF4xw/KT8-N1tVDSY.jpg"},{id:1,firstName:"Nyuta",lastName:"Len",messages:[{data:"26.09.2020",time:"21:00",userId:1,message:"gfyyehb!"},{data:"26.09.2020",time:"21:02",userId:2,message:"\u041f\u0440\u0438\u0432\u0435\u0442! hyFygd \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:1,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f?"}],avatarUrl:"https://sun9-38.userapi.com/s2Q9Sx9JrvmrGNf4VLI3Q1K3PLq7wdgtyP6tpw/MJU6_Gke5xk.jpg"},{id:2,firstName:"Rob",lastName:"Stark",messages:[{data:"26.09.2020",time:"21:00",userId:2,message:"\u041f\u0440\u0438\u0432\u0435\u0442!"},{data:"26.09.2020",time:"21:02",userId:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:2,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f \u043a\u0430\u043a?"}],avatarUrl:"https://sun9-25.userapi.com/iygXKWZTY6JJq7MHonu84abE2JNwtvyeVtBH3Q/37ktCVugVA0.jpg"}]},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MESSAGE":var n={data:"01.01.2020",time:"00:00",userId:2,message:t.text},c=Object(r.a)(Object(r.a)({},e),{},{dialogs:Object(a.a)(e.dialogs),messages:Object(r.a)({},e.dialogs.messages)});return c.dialogs[2].messages.push(n),c;default:return e}},i=function(e){return{text:e,type:"NEW_MESSAGE"}}},137:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return O}));var a=n(16),r=n.n(a),u=n(29),c=n(62),i=n(12),o=n(31),s=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),a):e}))},l={usersArr:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{usersArr:s(e.usersArr,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{usersArr:s(e.usersArr,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{usersArr:t.users});case"SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},f=function(e){return{type:"FOLLOW",userId:e}},p=function(e){return{type:"UNFOLLOW",userId:e}},m=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},g=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},h=function(e,t){return function(){var n=Object(u.a)(r.a.mark((function n(a){var u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(m(!0)),n.next=3,o.c.getUsers(e,t);case 3:u=n.sent,a(m(!1)),a({type:"SET_USERS",users:u.items}),a({type:"SET_TOTAL_USERS_COUNT",count:u.totalCount});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},b=function(){var e=Object(u.a)(r.a.mark((function e(t,n,a,u){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(u(n)),t(g(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),E=function(e){return function(){var t=Object(u.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(n,e,o.c.postFollow.bind(e),f);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(u.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(n,e,o.c.deleteFollow.bind(e),p);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},139:function(e,t,n){e.exports=n.p+"static/media/logo.33f5e1fe.png"},155:function(e,t,n){e.exports=n(255)},160:function(e,t,n){},162:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(28),c=n.n(u),i=(n(160),n(47)),o=n(46),s=n(259),l=n(263),d=n(257),f=n(264),p=n(265),m=n(266),g=n(267),h=n(268),b=(n(161),n(162),n(139)),E=n.n(b),O=n(45),v=n(21),j=n(262),S=n(152),y=function(){return r.a.createElement(j.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(S.a,{type:"primary",href:"/"},"Back Home")})},x=function(){return r.a.createElement("div",null,"Home Page")},w=n(48),_=n(44),I=n(12),T=n(80),P={initialized:!1},A=n(41),L=n(16),F=n.n(L),k=n(29),U=n(62),C=n(31),N={posts:[{id:0,text:"\u041c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0441\u0442"},{id:1,text:"\u041c\u043e\u0439 \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u0441\u0442"},{id:2,text:"\u041c\u043e\u0439 \u0442\u0440\u0435\u0442\u0438\u0439 \u043f\u043e\u0441\u0442"}],profile:null,status:""},R=function(e){return{type:"SET_STATUS",status:e}},G=function(e){return r.a.createElement("div",null,e.postText)},D=n(260),z=n(261),M=function(e){var t=e.addPost,n=D.a.useForm(),a=Object(o.a)(n,1)[0];return r.a.createElement(D.a,{onFinish:function(e){t(e.textInput),a.setFieldsValue({textInput:""})},form:a},r.a.createElement(D.a.Item,{name:"textInput",style:{marginBottom:7},rules:[{pattern:"^[A-Za-z!.?, ]*$",message:"Use only latin symbols"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return!n||t("textInput").length<=5?Promise.resolve():Promise.reject("Max length is 5 simbols!")}}}]},r.a.createElement(z.a.TextArea,{autoSize:!0,onChange:function(e){/^[A-Za-z!.?, ]*$/.test(e.currentTarget.value)||(a.setFieldsValue({textInput:e.currentTarget.value.slice(0,-1)}),a.validateFields())},style:{width:"300px"}})),r.a.createElement(D.a.Item,{style:{marginBottom:25},shouldUpdate:!0},(function(){return r.a.createElement(S.a,{type:"dashed",htmlType:"submit",disabled:!a.isFieldsTouched(!0)||!!a.getFieldsError().filter((function(e){return e.errors.length})).length},"Add Post")})))};function H(){var e=Object(i.a)(["\n  max-width: 300px;\n  border: 2px solid palevioletred;\n"]);return H=function(){return e},e}var V=w.a.div(H()),W={addPost:function(e){return{text:e,type:"ADD_POST"}}},B=Object(_.b)((function(e){return{posts:e.profile.posts}}),W)((function(e){var t=e.addPost,n=e.posts;return r.a.createElement("div",null,r.a.createElement(M,{addPost:t}),r.a.createElement(V,null,n.map((function(e){return r.a.createElement(G,{postText:e.text,key:e.id})}))))})),J=n(108);function K(){var e=Object(i.a)(["\n  height: 40px;\n  align-items: center;\n  display: flex;\n"]);return K=function(){return e},e}var Y="Your status",Z=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),u=n[0],c=n[1],i=Object(a.useState)(null===e||void 0===e?void 0:e.status),s=Object(o.a)(i,2),l=s[0],f=s[1],p=Object(a.useState)(!1),m=Object(o.a)(p,2),g=m[0],h=m[1];Object(a.useEffect)((function(){f(e.status)}),[e.status]);return r.a.createElement(Q,null,u?r.a.createElement(z.a,{onChange:function(e){f(e.currentTarget.value)},onBlur:function(){c(!1),e.status!==l&&e.updateStatus(l,h)},value:l,style:{width:"300px"},autoFocus:!0,placeholder:"Status"}):r.a.createElement("div",null,g?r.a.createElement(d.a,null):r.a.createElement("span",{onDoubleClick:function(){"13090"!==e.userId&&void 0!==e.userId||c(!0)},style:{opacity:e.status?1:.3,paddingLeft:"12px"}},l||Y)))},Q=w.a.div(K()),X=n(134),q=n.n(X);function $(){var e=Object(i.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n"]);return $=function(){return e},e}var ee={getProfileThunk:function(e,t){return function(){var n=Object(k.a)(F.a.mark((function n(a){var r;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(!0),n.prev=1,n.next=4,C.b.getProfile(e);case 4:r=n.sent,a({type:"SET_USER_PROFILE",profile:null===r||void 0===r?void 0:r.data}),t(!1),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t(!1);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(k.a)(F.a.mark((function t(n){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.b.getStatus(e);case 2:a=t.sent,n(R(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e,t){return function(){var n=Object(k.a)(F.a.mark((function n(a){return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(!0),n.next=3,C.b.updateStatus(e);case 3:0===n.sent.data.resultCode&&(a(R(e)),t(!1));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(k.a)(F.a.mark((function t(n){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.b.savePhoto(e);case 2:0===(a=t.sent).data.resultCode&&n({type:"SAVE_PHOTOS_SACCESS",photos:a.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},te=Object(A.d)(Object(_.b)((function(e){return{profile:e.profile.profile,status:e.profile.status}}),ee),J.a)((function(e){var t,n=e.profile,u=e.status,c=e.getProfileThunk,i=e.getUserStatus,s=e.updateStatus,l=e.savePhoto,f=Object(v.g)(),p=Object(a.useState)(!1),m=Object(o.a)(p,2),g=m[0],h=m[1];if(Object(a.useEffect)((function(){c(f,h),i(f.id||13090)}),[f]),g)return r.a.createElement(ne,null,r.a.createElement(d.a,{tip:"Loading...",size:"large"}));var b="13090"===f.id||void 0===f.id;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,n?n.fullName:"Users name"," "),"About me: ".concat(null===n||void 0===n?void 0:n.aboutMe),r.a.createElement("div",null,r.a.createElement("img",{src:(null===n||void 0===n||null===(t=n.photos)||void 0===t?void 0:t.small)||q.a}),r.a.createElement("div",null,b&&r.a.createElement("input",{type:"file",onChange:function(e){e.target.files.length&&l(e.target.files[0])}}))),r.a.createElement(Z,{status:u,updateStatus:s,userId:f.id})),r.a.createElement("h1",null,"My Post"),r.a.createElement(B,null))})),ne=w.a.div($()),ae=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))}};function re(){var e=Object(i.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n"]);return re=function(){return e},e}function ue(){var e=Object(i.a)(["\n  min-height: calc(100% - 120px);\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 30px;\n\n  .ant-menu-item:last-child {\n    margin-top: auto;\n  }\n"]);return ue=function(){return e},e}var ce=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(6)]).then(n.bind(null,377))})),ie=Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(7)]).then(n.bind(null,381))})),oe=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(9),n.e(8)]).then(n.bind(null,379))})),se=s.a.Header,le=s.a.Content,de=s.a.Footer,fe=s.a.Sider,pe=l.a.Item,me={initializeApp:function(){return function(e){var t=e(Object(T.c)());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}},ge=Object(A.d)(v.h,Object(_.b)((function(e){return{initialized:e.app.initialized}}),me))((function(e){var t=e.location,n=e.initialized,u=e.initializeApp,c=Object(a.useState)(""),i=Object(o.a)(c,2),l=i[0],b=i[1];return Object(a.useEffect)((function(){u()}),[]),Object(a.useEffect)((function(){t.pathname.includes("/",1)?b(t.pathname.substring(0,t.pathname.indexOf("/",1))):b(t.pathname)}),[t]),r.a.createElement(r.a.Fragment,null,n?r.a.createElement(s.a,{style:{minHeight:"100vh"}},r.a.createElement(fe,null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:E.a})),r.a.createElement(he,{theme:"dark",selectedKeys:[l]},r.a.createElement(pe,{key:"/",icon:r.a.createElement(f.a,null)},r.a.createElement(O.b,{to:"/"},"Home")),r.a.createElement(pe,{key:"/profile",icon:r.a.createElement(p.a,null)},r.a.createElement(O.b,{to:"/profile"},"Profile")),r.a.createElement(pe,{key:"/users",icon:r.a.createElement(m.a,null)},r.a.createElement(O.b,{to:"/users"},"Users")),r.a.createElement(pe,{key:"/dialogs",icon:r.a.createElement(g.a,null)},r.a.createElement(O.b,{to:"/dialogs"},"Dialogs")),r.a.createElement(pe,{key:"/login",icon:r.a.createElement(h.a,null)},r.a.createElement(O.b,{to:"/login"},"Login")))),r.a.createElement(s.a,{className:"site-layout"},r.a.createElement(se,{className:"site-layout-background",style:{padding:0}}),r.a.createElement(le,{style:{margin:"16px"}},r.a.createElement("div",{className:"site-layout-background",style:{padding:24,height:"100%"}},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",component:x}),r.a.createElement(v.b,{path:"/profile/:id",render:function(){return r.a.createElement(te,null)}}),r.a.createElement(v.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(te,null)}}),r.a.createElement(v.b,{exact:!0,path:"/users",render:ae(oe)}),r.a.createElement(v.b,{exact:!0,path:"/dialogs",render:ae(ce)}),r.a.createElement(v.b,{exact:!0,path:"/login",render:ae(ie)}),r.a.createElement(v.b,{path:"*",component:y})))),r.a.createElement(de,{style:{textAlign:"center"}}))):r.a.createElement(be,null,r.a.createElement(d.a,{tip:"Loading...",size:"large"})))})),he=Object(w.a)(l.a)(ue()),be=w.a.div(re()),Ee=n(135),Oe=n(137),ve=n(151),je=Object(A.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:e.posts.length,text:t.text};return Object(I.a)(Object(I.a)({},e),{},{posts:[].concat(Object(U.a)(e.posts),[n])});case"SET_USER_PROFILE":return Object(I.a)(Object(I.a)({},e),{},{profile:t.profile});case"SET_STATUS":return Object(I.a)(Object(I.a)({},e),{},{status:t.status});case"SAVE_PHOTOS_SACCESS":return Object(I.a)(Object(I.a)({},e),{},{profile:Object(I.a)(Object(I.a)({},e.profile),{},{photos:t.photos})});default:return e}},dialogs:Ee.a,users:Oe.d,auth:T.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(I.a)(Object(I.a)({},e),{},{initialized:!0});default:return e}}}),Se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d,ye=Object(A.e)(je,Se(Object(A.a)(ve.a)));window.__store__=ye;var xe=Object(v.h)((function(e){return r.a.createElement(ge,e)}));c.a.render(r.a.createElement(O.a,null,r.a.createElement(_.a,{store:ye},r.a.createElement(xe,null))),document.getElementById("root"))},31:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n(142),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ed4a67f8-9eef-4f4c-86ad-a0230918bd68"}}),u={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).catch((function(e){console.log(e)})).then((function(e){return e.data}))},postFollow:function(e){return r.post("follow/".concat(e),{}).catch((function(e){console.log(e)})).then((function(e){return e.data}))},deleteFollow:function(e){return r.delete("follow/".concat(e)).catch((function(e){console.log(e)})).then((function(e){return e.data}))}},c={getProfile:function(e){return r.get("profile/".concat(e.id?e.id:13090))},getStatus:function(e){return r.get("/profile/status/".concat(e))},updateStatus:function(e){return r.put("profile/status/",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t)}},i={getAuthMe:function(){return r.get("auth/me").then((function(e){return e.data}))},postLogin:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n})},deleteLogout:function(){return r.delete("auth/login")}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(16),r=n.n(a),u=n(29),c=n(12),i=n(31),o={id:null,email:null,login:null,isAuth:!1,isFetching:!1,errorMessage:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(c.a)(Object(c.a)({},e),t.data);case"SET_ERROR":return Object(c.a)(Object(c.a)({},e),{},{errorMessage:t.errorMessage});default:return e}},l=function(e,t,n,a){return{type:"SET_USER_DATA",data:{id:e,login:t,email:n,isAuth:a}}},d=function(e){return{type:"SET_ERROR",errorMessage:e}},f=function(){return function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,u,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getAuthMe();case 2:0===(n=e.sent).resultCode&&(a=n.data,u=a.id,c=a.login,o=a.email,t(l(u,c,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t,n){return function(){var a=Object(u.a)(r.a.mark((function a(u){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.postLogin(e,t,n);case 2:0===(c=a.sent).data.resultCode?u(f()):u(d(c.data.messages[0]));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},m=function(){return function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.deleteLogout();case 2:0===e.sent.data.resultCode&&t(l(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},[[155,2,3]]]);
//# sourceMappingURL=main.cd2534c6.chunk.js.map