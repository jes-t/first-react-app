(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),u=n(21),c=n(44),i=function(e){return{isAuth:e.auth.isAuth}},s=function(e){return Object(c.b)(i)((function(t){return t.isAuth?r.a.createElement(e,t):r.a.createElement(u.a,{to:"/login"})}))}},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var a=n(62),r=n(12),u={dialogs:[{id:0,firstName:"Jems",lastName:"Band",messages:[{data:"26.09.2020",time:"21:00",userId:0,message:"gfhdhhd!"},{data:"26.09.2020",time:"21:02",userId:1,message:"gfhdhjd! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:0,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 yefdmkfbs?"}],avatarUrl:"https://sun9-8.userapi.com/o4uD1PeHB2-m8Db3_tPtHnc4MjmDO4Tv4YF4xw/KT8-N1tVDSY.jpg"},{id:1,firstName:"Nyuta",lastName:"Len",messages:[{data:"26.09.2020",time:"21:00",userId:1,message:"gfyyehb!"},{data:"26.09.2020",time:"21:02",userId:2,message:"\u041f\u0440\u0438\u0432\u0435\u0442! hyFygd \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:1,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f?"}],avatarUrl:"https://sun9-38.userapi.com/s2Q9Sx9JrvmrGNf4VLI3Q1K3PLq7wdgtyP6tpw/MJU6_Gke5xk.jpg"},{id:2,firstName:"Rob",lastName:"Stark",messages:[{data:"26.09.2020",time:"21:00",userId:2,message:"\u041f\u0440\u0438\u0432\u0435\u0442!"},{data:"26.09.2020",time:"21:02",userId:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442! \u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{data:"26.09.2020",time:"21:05",userId:2,message:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f \u043a\u0430\u043a?"}],avatarUrl:"https://sun9-25.userapi.com/iygXKWZTY6JJq7MHonu84abE2JNwtvyeVtBH3Q/37ktCVugVA0.jpg"}]},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_MESSAGE":var n={data:"01.01.2020",time:"00:00",userId:2,message:t.text},c=Object(r.a)(Object(r.a)({},e),{},{dialogs:Object(a.a)(e.dialogs),messages:Object(r.a)({},e.dialogs.messages)});return c.dialogs[2].messages.push(n),c;default:return e}},i=function(e){return{text:e,type:"NEW_MESSAGE"}}},136:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O}));var a=n(19),r=n.n(a),u=n(30),c=n(62),i=n(12),s=n(35),o=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),a):e}))},l={usersArr:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{usersArr:o(e.usersArr,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{usersArr:o(e.usersArr,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{usersArr:t.users});case"SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},f=function(e){return{type:"FOLLOW",userId:e}},p=function(e){return{type:"UNFOLLOW",userId:e}},m=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},g=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},b=function(e,t){return function(){var n=Object(u.a)(r.a.mark((function n(a){var u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(m(!0)),n.next=3,s.c.getUsers(e,t);case 3:u=n.sent,a(m(!1)),a({type:"SET_USERS",users:u.items}),a({type:"SET_TOTAL_USERS_COUNT",count:u.totalCount});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=function(){var e=Object(u.a)(r.a.mark((function e(t,n,a,u){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(u(n)),t(g(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),h=function(e){return function(){var t=Object(u.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,s.c.postFollow.bind(e),f);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(u.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,s.c.deleteFollow.bind(e),p);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},138:function(e,t,n){e.exports=n.p+"static/media/logo.33f5e1fe.png"},154:function(e,t,n){e.exports=n(254)},159:function(e,t,n){},161:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(28),c=n.n(u),i=(n(159),n(47)),s=n(46),o=n(258),l=n(262),d=n(256),f=n(263),p=n(264),m=n(265),g=n(266),b=n(267),E=(n(160),n(161),n(138)),h=n.n(E),O=n(45),v=n(21),j=n(261),S=n(151),y=function(){return r.a.createElement(j.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(S.a,{type:"primary",href:"/"},"Back Home")})},x=function(){return r.a.createElement("div",null,"Home Page")},I=n(48),w=n(44),T=n(12),_=n(80),A={initialized:!1},P=n(41),L=n(19),F=n.n(L),k=n(30),U=n(62),N=n(35),R={posts:[{id:0,text:"\u041c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0441\u0442"},{id:1,text:"\u041c\u043e\u0439 \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u0441\u0442"},{id:2,text:"\u041c\u043e\u0439 \u0442\u0440\u0435\u0442\u0438\u0439 \u043f\u043e\u0441\u0442"}],profile:null,status:""},C=function(e){return{type:"SET_STATUS",status:e}},G=function(e){return r.a.createElement("div",null,e.postText)},z=n(259),D=n(260),M=function(e){var t=e.addPost,n=z.a.useForm(),a=Object(s.a)(n,1)[0];return r.a.createElement(z.a,{onFinish:function(e){t(e.textInput),a.setFieldsValue({textInput:""})},form:a},r.a.createElement(z.a.Item,{name:"textInput",style:{marginBottom:7},rules:[{pattern:"^[A-Za-z!.?, ]*$",message:"Use only latin symbols"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return!n||t("textInput").length<=5?Promise.resolve():Promise.reject("Max length is 5 simbols!")}}}]},r.a.createElement(D.a.TextArea,{autoSize:!0,onChange:function(e){/^[A-Za-z!.?, ]*$/.test(e.currentTarget.value)||(a.setFieldsValue({textInput:e.currentTarget.value.slice(0,-1)}),a.validateFields())},style:{width:"300px"}})),r.a.createElement(z.a.Item,{style:{marginBottom:25},shouldUpdate:!0},(function(){return r.a.createElement(S.a,{type:"dashed",htmlType:"submit",disabled:!a.isFieldsTouched(!0)||!!a.getFieldsError().filter((function(e){return e.errors.length})).length},"Add Post")})))};function H(){var e=Object(i.a)(["\n  max-width: 300px;\n  border: 2px solid palevioletred;\n"]);return H=function(){return e},e}var V=I.a.div(H()),W={addPost:function(e){return{text:e,type:"ADD_POST"}}},B=Object(w.b)((function(e){return{posts:e.profile.posts}}),W)((function(e){var t=e.addPost,n=e.posts;return r.a.createElement("div",null,r.a.createElement(M,{addPost:t}),r.a.createElement(V,null,n.map((function(e){return r.a.createElement(G,{postText:e.text,key:e.id})}))))})),J=n(108);function K(){var e=Object(i.a)(["\n  height: 40px;\n  align-items: center;\n  display: flex;\n"]);return K=function(){return e},e}var Y="Your status",Z=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),u=n[0],c=n[1],i=Object(a.useState)(null===e||void 0===e?void 0:e.status),o=Object(s.a)(i,2),l=o[0],f=o[1],p=Object(a.useState)(!1),m=Object(s.a)(p,2),g=m[0],b=m[1];Object(a.useEffect)((function(){f(e.status)}),[e.status]);return r.a.createElement(Q,null,u?r.a.createElement(D.a,{onChange:function(e){f(e.currentTarget.value)},onBlur:function(){c(!1),e.status!==l&&e.updateStatus(l,b)},value:l,style:{width:"300px"},autoFocus:!0,placeholder:"Status"}):r.a.createElement("div",null,g?r.a.createElement(d.a,null):r.a.createElement("span",{onDoubleClick:function(){"13090"!==e.userId&&void 0!==e.userId||c(!0)},style:{opacity:e.status?1:.3,paddingLeft:"12px"}},l||Y)))},Q=I.a.div(K());function X(){var e=Object(i.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n"]);return X=function(){return e},e}var q={getProfileThunk:function(e,t){return function(){var n=Object(k.a)(F.a.mark((function n(a){var r;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(!0),n.prev=1,n.next=4,N.b.getProfile(e);case 4:r=n.sent,a({type:"SET_USER_PROFILE",profile:null===r||void 0===r?void 0:r.data}),t(!1),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),t(!1);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(k.a)(F.a.mark((function t(n){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.b.getStatus(e);case 2:a=t.sent,n(C(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e,t){return function(){var n=Object(k.a)(F.a.mark((function n(a){return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(!0),n.next=3,N.b.updateStatus(e);case 3:0===n.sent.data.resultCode&&(a(C(e)),t(!1));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},$=Object(P.d)(Object(w.b)((function(e){return{profile:e.profile.profile,status:e.profile.status}}),q),J.a)((function(e){var t,n=e.profile,u=e.status,c=e.getProfileThunk,i=e.getUserStatus,o=e.updateStatus,l=Object(v.g)(),f=Object(a.useState)(!1),p=Object(s.a)(f,2),m=p[0],g=p[1];return Object(a.useEffect)((function(){c(l,g),i(l.id||13090)}),[]),m?r.a.createElement(ee,null,r.a.createElement(d.a,{tip:"Loading...",size:"large"})):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,n?n.fullName:"Users name"," "),"About me: ".concat(null===n||void 0===n?void 0:n.aboutMe),r.a.createElement("div",null,r.a.createElement("img",{src:null===n||void 0===n||null===(t=n.photos)||void 0===t?void 0:t.small})),r.a.createElement(Z,{status:u,updateStatus:o,userId:l.id})),r.a.createElement("h1",null,"My Post"),r.a.createElement(B,null))})),ee=I.a.div(X()),te=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(e,t))}};function ne(){var e=Object(i.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n"]);return ne=function(){return e},e}function ae(){var e=Object(i.a)(["\n  min-height: calc(100% - 120px);\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 30px;\n\n  .ant-menu-item:last-child {\n    margin-top: auto;\n  }\n"]);return ae=function(){return e},e}var re=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,377))})),ue=Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(8)]).then(n.bind(null,381))})),ce=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(9),n.e(6)]).then(n.bind(null,379))})),ie=o.a.Header,se=o.a.Content,oe=o.a.Footer,le=o.a.Sider,de=l.a.Item,fe={initializeApp:function(){return function(e){var t=e(Object(_.c)());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}},pe=Object(P.d)(v.h,Object(w.b)((function(e){return{initialized:e.app.initialized}}),fe))((function(e){var t=e.location,n=e.initialized,u=e.initializeApp,c=Object(a.useState)(""),i=Object(s.a)(c,2),l=i[0],E=i[1];return Object(a.useEffect)((function(){u()}),[]),Object(a.useEffect)((function(){t.pathname.includes("/",1)?E(t.pathname.substring(0,t.pathname.indexOf("/",1))):E(t.pathname)}),[t]),r.a.createElement(r.a.Fragment,null,n?r.a.createElement(o.a,{style:{minHeight:"100vh"}},r.a.createElement(le,null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:h.a})),r.a.createElement(me,{theme:"dark",selectedKeys:[l]},r.a.createElement(de,{key:"/",icon:r.a.createElement(f.a,null)},r.a.createElement(O.b,{to:"/"},"Home")),r.a.createElement(de,{key:"/profile",icon:r.a.createElement(p.a,null)},r.a.createElement(O.b,{to:"/profile"},"Profile")),r.a.createElement(de,{key:"/users",icon:r.a.createElement(m.a,null)},r.a.createElement(O.b,{to:"/users"},"Users")),r.a.createElement(de,{key:"/dialogs",icon:r.a.createElement(g.a,null)},r.a.createElement(O.b,{to:"/dialogs"},"Dialogs")),r.a.createElement(de,{key:"/login",icon:r.a.createElement(b.a,null)},r.a.createElement(O.b,{to:"/login"},"Login")))),r.a.createElement(o.a,{className:"site-layout"},r.a.createElement(ie,{className:"site-layout-background",style:{padding:0}}),r.a.createElement(se,{style:{margin:"16px"}},r.a.createElement("div",{className:"site-layout-background",style:{padding:24,height:"100%"}},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",component:x}),r.a.createElement(v.b,{path:"/profile/:id",render:function(){return r.a.createElement($,null)}}),r.a.createElement(v.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement($,null)}}),r.a.createElement(v.b,{exact:!0,path:"/users",render:te(ce)}),r.a.createElement(v.b,{exact:!0,path:"/dialogs",render:te(re)}),r.a.createElement(v.b,{exact:!0,path:"/login",render:te(ue)}),r.a.createElement(v.b,{path:"*",component:y})))),r.a.createElement(oe,{style:{textAlign:"center"}}))):r.a.createElement(ge,null,r.a.createElement(d.a,{tip:"Loading...",size:"large"})))})),me=Object(I.a)(l.a)(ae()),ge=I.a.div(ne()),be=n(134),Ee=n(136),he=n(150),Oe=Object(P.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:e.posts.length,text:t.text};return Object(T.a)(Object(T.a)({},e),{},{posts:[].concat(Object(U.a)(e.posts),[n])});case"SET_USER_PROFILE":return Object(T.a)(Object(T.a)({},e),{},{profile:t.profile});case"SET_STATUS":return Object(T.a)(Object(T.a)({},e),{},{status:t.status});default:return e}},dialogs:be.a,users:Ee.d,auth:_.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{initialized:!0});default:return e}}}),ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.d,je=Object(P.e)(Oe,ve(Object(P.a)(he.a)));window.__store__=je;var Se=Object(v.h)((function(e){return r.a.createElement(pe,e)}));c.a.render(r.a.createElement(O.a,null,r.a.createElement(w.a,{store:je},r.a.createElement(Se,null))),document.getElementById("root"))},35:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n(141),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ed4a67f8-9eef-4f4c-86ad-a0230918bd68"}}),u={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).catch((function(e){console.log(e)})).then((function(e){return e.data}))},postFollow:function(e){return r.post("follow/".concat(e),{}).catch((function(e){console.log(e)})).then((function(e){return e.data}))},deleteFollow:function(e){return r.delete("follow/".concat(e)).catch((function(e){console.log(e)})).then((function(e){return e.data}))}},c={getProfile:function(e){return r.get("profile/".concat(e.id?e.id:13090))},getStatus:function(e){return r.get("/profile/status/".concat(e))},updateStatus:function(e){return r.put("profile/status/",{status:e})}},i={getAuthMe:function(){return r.get("auth/me").then((function(e){return e.data}))},postLogin:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n})},deleteLogout:function(){return r.delete("auth/login")}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(19),r=n.n(a),u=n(30),c=n(12),i=n(35),s={id:null,email:null,login:null,isAuth:!1,isFetching:!1,errorMessage:""},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(c.a)(Object(c.a)({},e),t.data);case"SET_ERROR":return Object(c.a)(Object(c.a)({},e),{},{errorMessage:t.errorMessage});default:return e}},l=function(e,t,n,a){return{type:"SET_USER_DATA",data:{id:e,login:t,email:n,isAuth:a}}},d=function(e){return{type:"SET_ERROR",errorMessage:e}},f=function(){return function(){var e=Object(u.a)(r.a.mark((function e(t){var n,a,u,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getAuthMe();case 2:0===(n=e.sent).resultCode&&(a=n.data,u=a.id,c=a.login,s=a.email,t(l(u,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t,n){return function(){var a=Object(u.a)(r.a.mark((function a(u){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.postLogin(e,t,n);case 2:0===(c=a.sent).data.resultCode?u(f()):u(d(c.data.messages[0]));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},m=function(){return function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.deleteLogout();case 2:0===e.sent.data.resultCode&&t(l(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},[[154,2,3]]]);
//# sourceMappingURL=main.8be0d057.chunk.js.map